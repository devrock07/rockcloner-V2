name: Upload External ZIP to GitHub Release

on:
  workflow_dispatch: # Allows you to manually trigger the action
  push:
    branches:
      - main

jobs:
  upload_zip:
    runs-on: ubuntu-latest

    steps:
      - name: Download ZIP from external URL
        run: |
          mkdir -p download
          curl -L "https://store-na-phx-1.gofile.io/download/web/18dc1ca5-2c01-4957-b7b1-97c7984cb877/rockcloner-v2.zip" -o download/rockcloner-v2.zip

      - name: Create GitHub Release
        id: create_release
        uses: softprops/action-gh-release@v2
        with:
          tag_name: "v${{ github.run_number }}"
          name: "Release v${{ github.run_number }}"
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Upload ZIP to Release
        uses: softprops/action-gh-release@v2
        with:
          files: download/rockcloner-v2.zip
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
